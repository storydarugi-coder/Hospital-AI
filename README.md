# Hospital Toolchain - ë³‘ì› ë¸”ë¡œê·¸ ë§ˆì¼€íŒ… ì „ìš©

> ğŸš€ ìµœì‹  ì—…ë°ì´íŠ¸: GPT-5.2 5ë‹¨ê³„ í”„ë¡¬í”„íŠ¸ ì‹œìŠ¤í…œ ì ìš©!

## í”„ë¡œì íŠ¸ ê°œìš”
- **ì´ë¦„**: Hospital Toolchain
- **ëª©ì **: ì˜ë£Œê´‘ê³ ë²•ì„ ì¤€ìˆ˜í•˜ëŠ” ë¸”ë¡œê·¸ ì½˜í…ì¸ ë¥¼ AIë¡œ ìë™ ìƒì„±
- **ê¸°ìˆ  ìŠ¤íƒ**: Hono + React + Cloudflare Pages + Google Gemini API + OpenAI GPT-5.2

## â­ ìƒˆë¡œìš´ ê¸°ëŠ¥: ë‹¨ê³„ë³„ í”„ë¡¬í”„íŠ¸ ì‹œìŠ¤í…œ

GPT-5.2ì˜ í† í° ì œí•œê³¼ í”„ë¡¬í”„íŠ¸ ë³µì¡ë„ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **5ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤**ë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤:

### ğŸ“‹ 5ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤

1. **1ë‹¨ê³„: ê¸€ ìƒì„± (ê¸°ë³¸ ê·œì¹™)**
   - ì˜ë£Œë²• í•µì‹¬ ê·œì¹™ë§Œ ì ìš©
   - ê¸°ë³¸ ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼ë¡œ ì´ˆì•ˆ ì‘ì„±
   - ì£¼ì œì— ë§ëŠ” í’ë¶€í•œ ì½˜í…ì¸  ìƒì„±

2. **2ë‹¨ê³„: AI ëƒ„ìƒˆ ì œê±°**
   - ë°˜ë³µ í‘œí˜„ ì œê±° ("~ìˆ˜ ìˆìŠµë‹ˆë‹¤" ì—°ì† ì‚¬ìš© ë“±)
   - êµê³¼ì„œì‹ êµ¬ì¡° íƒˆí”¼
   - ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸ì¥ìœ¼ë¡œ ìˆ˜ì •

3. **3ë‹¨ê³„: SEO ìµœì í™”**
   - í‚¤ì›Œë“œ ë°€ë„ ì¡°ì • (1.5~2.5%)
   - ì†Œì œëª© ìµœì í™”
   - ê²€ìƒ‰ ì˜ë„ ë°˜ì˜
   - ëª©í‘œ: 90ì  ì´ìƒ

4. **4ë‹¨ê³„: ì˜ë£Œë²• ê²€ì¦**
   - ê¸ˆì§€ í‘œí˜„ ì²´í¬ ë° ìˆ˜ì •
   - ì•ˆì „ í‘œí˜„ ì ìš©
   - CTA ì™„ê³¡í™”

5. **5ë‹¨ê³„: ìµœì¢… ë‹¤ë“¬ê¸°**
   - ì „ì²´ íë¦„ ê²€í† 
   - ë§ˆì§€ë§‰ í’ˆì§ˆ ì²´í¬
   - í†µí•© ì ìˆ˜ í™•ì¸ (ëª¨ë“  ì¹´í…Œê³ ë¦¬ 85ì  ì´ìƒ)

### ğŸ“Š ì¥ì 

- âœ… **í† í° íš¨ìœ¨ì„±**: ê° ë‹¨ê³„ë³„ë¡œ ì§§ì€ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©
- âœ… **í’ˆì§ˆ í–¥ìƒ**: ê° ë‹¨ê³„ë§ˆë‹¤ ì§‘ì¤‘ì ì¸ ê°œì„ 
- âœ… **ë””ë²„ê¹… ìš©ì´**: ì–´ëŠ ë‹¨ê³„ì—ì„œ ë¬¸ì œê°€ ìƒê²¼ëŠ”ì§€ ëª…í™•íˆ íŒŒì•…
- âœ… **ì•ˆì •ì„±**: ì´ì „ ë‹¨ê³„ ê²°ê³¼ ìœ ì§€ë¡œ ì˜¤ë¥˜ ë°©ì§€

## ì£¼ìš” ê¸°ëŠ¥
- âœ… ì‹¤ì‹œê°„ íŠ¸ë Œë“œ í‚¤ì›Œë“œ ë¶„ì„
- âœ… SEO ìµœì í™” ì œëª© ìë™ ìƒì„±
- âœ… ì˜ë£Œê´‘ê³ ë²• ì¤€ìˆ˜ ì•ˆì „ ì ìˆ˜ í™•ì¸
- âœ… AI ì´ë¯¸ì§€ ìƒì„± (ì‹¤ì‚¬/3D ì¼ëŸ¬ìŠ¤íŠ¸)
- âœ… ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… & ì¹´ë“œë‰´ìŠ¤ ì œì‘
- âœ… 5ê°€ì§€ CSS í…Œë§ˆ (ëª¨ë˜/í”„ë¦¬ë¯¸ì—„/ë¯¸ë‹ˆë©€/ë”°ëœ»í•œ/ì˜ë£Œì „ë¬¸)
- âœ… ë²¤ì¹˜ë§ˆí‚¹ URL ë¶„ì„ ë° ìŠ¤íƒ€ì¼ ëª¨ë°©
- âœ… AI ì •ë°€ë³´ì • ê¸°ëŠ¥
- âœ… ì´ë¯¸ì§€ ì¬ìƒì„± (í”„ë¡¬í”„íŠ¸ ìˆ˜ì •)
- âœ… ë¸”ë¡œê·¸ ë³µì‚¬ ê¸°ëŠ¥ (HTML í¬ë§·)

## URLs
- **í”„ë¡œë•ì…˜**: https://story-darugi.com
- **API Health Check**: https://story-darugi.com/api/health
- **Cloudflare Pages**: https://ai-hospital.pages.dev

## ì‚¬ìš© ë°©ë²•
1. API Key ì„¤ì •
   - Google AI Studioì—ì„œ Gemini API í‚¤ ë°œê¸‰
   - ì•± ì„¤ì •(âš™ï¸)ì—ì„œ API í‚¤ ì…ë ¥
   
2. ì½˜í…ì¸  ìƒì„±
   - ì§„ë£Œê³¼ ì„ íƒ (ë‚´ê³¼, ì •í˜•ì™¸ê³¼, í”¼ë¶€ê³¼ ë“± 18ê°œ)
   - íŠ¸ë Œë“œ í‚¤ì›Œë“œ ë¶„ì„ ë˜ëŠ” ì§ì ‘ ì£¼ì œ ì…ë ¥
   - ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ ì„ íƒ (ì‹¤ì‚¬/ì¼ëŸ¬ìŠ¤íŠ¸)
   - CSS í…Œë§ˆ ì„ íƒ
   - "ë³‘ì› ë¸”ë¡œê·¸ ì›ê³  ìƒì„±" í´ë¦­

3. ê²°ê³¼ í™œìš©
   - ë¯¸ë¦¬ë³´ê¸°ì—ì„œ ì§ì ‘ í¸ì§‘ ê°€ëŠ¥
   - AI ì •ë°€ë³´ì •ìœ¼ë¡œ ìˆ˜ì •
   - ì´ë¯¸ì§€ í´ë¦­í•˜ì—¬ ì¬ìƒì„±
   - "í‹°ìŠ¤í† ë¦¬ ë¸”ë¡œê·¸ë¡œ ë³µì‚¬" í´ë¦­

## ë°ì´í„° ì•„í‚¤í…ì²˜
- **API ì„œë²„**: Cloudflare Pages Functions (/api/*)
- **ë°ì´í„°ë² ì´ìŠ¤**: Cloudflare KV Storage (CONTENT_STORAGE)
- **AI API**: Google Gemini API (í…ìŠ¤íŠ¸ ìƒì„± + ì´ë¯¸ì§€ ìƒì„±) + OpenAI GPT-5.2
- **ìƒíƒœ ê´€ë¦¬**: React useState/useEffect + Context API

### Cloudflare Pages Functions API

í”„ë¡œì íŠ¸ëŠ” Cloudflare Pages Functionsë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ë¦¬ìŠ¤ APIë¥¼ ì œê³µí•©ë‹ˆë‹¤:

#### ğŸ“¡ **API Endpoints**
- `GET /api/health` - í—¬ìŠ¤ ì²´í¬
- `GET /api/api-keys/get` - API í‚¤ ì¡°íšŒ
- `POST /api/api-keys/save` - API í‚¤ ì €ì¥
- `DELETE /api/api-keys/delete` - API í‚¤ ì‚­ì œ
- `GET /api/content/list` - ì½˜í…ì¸  ëª©ë¡
- `POST /api/content/save` - ì½˜í…ì¸  ì €ì¥
- `GET /api/stats` - í†µê³„ ì¡°íšŒ

#### ğŸ—„ï¸ **KV Storage**
- **Namespace ID**: `5bb13721765b4a74b0ab855c92b2e9a9`
- **Binding**: `CONTENT_STORAGE`
- **ìš©ë„**: ìƒì„±ëœ ì½˜í…ì¸  ì˜êµ¬ ì €ì¥ ë° íŒ€ ê³µìœ 

## ë°°í¬
- **í”Œë«í¼**: Cloudflare Pages
- **í”„ë¡œë•ì…˜**: https://story-darugi.com
- **ê¸°ìˆ  ìŠ¤íƒ**: React 19 + TypeScript + TailwindCSS + Cloudflare Pages Functions

### ğŸš€ Cloudflare Pages ë°°í¬ ê°€ì´ë“œ

#### **í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (í•„ìˆ˜)**

Cloudflare Dashboardì—ì„œ ì„¤ì •:
1. **Workers & Pages** â†’ **ai-hospital** â†’ **Settings** â†’ **Environment variables**
2. ì¶”ê°€í•  í™˜ê²½ ë³€ìˆ˜:
   - `GEMINI_API_KEY`: Google Gemini API í‚¤
   - `OPENAI_API_KEY`: OpenAI API í‚¤ (ì„ íƒ)

#### **ìë™ ë°°í¬ (GitHub Actions)**

`.github/workflows/deploy.yml` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ìë™ ë°°í¬ ì„¤ì •:

```yaml
name: Deploy to Cloudflare Pages

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      deployments: write
      pull-requests: write
    name: Deploy to Cloudflare Pages
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Build
        run: npm run build

      - name: Deploy to Cloudflare Pages
        uses: cloudflare/pages-action@v1
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          projectName: ai-hospital
          directory: dist
          gitHubToken: ${{ secrets.GITHUB_TOKEN }}
          wranglerVersion: '3'
```

#### **GitHub Secrets ì„¤ì •**

Repository Settingsì—ì„œ ì¶”ê°€:
- `CLOUDFLARE_API_TOKEN`: Cloudflare API í† í° (Edit Cloudflare Workers ê¶Œí•œ)
- `CLOUDFLARE_ACCOUNT_ID`: Cloudflare ê³„ì • ID

#### **ìˆ˜ë™ ë°°í¬**

```bash
# Wrangler CLI ì‚¬ìš©
npx wrangler pages deploy dist --project-name=ai-hospital
```

## ê°œë°œ ëª…ë ¹ì–´
```bash
# ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev

# ë¹Œë“œ
npm run build

# ìƒŒë“œë°•ìŠ¤ ë°°í¬ í…ŒìŠ¤íŠ¸
npm run dev:sandbox

# Cloudflare Pages ë°°í¬
npm run deploy
```

## íŒŒì¼ êµ¬ì¡°
```
webapp/
â”œâ”€â”€ functions/                   # ğŸ†• Cloudflare Pages Functions
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ health.ts           # Health check API
â”‚       â”œâ”€â”€ stats.ts            # í†µê³„ API
â”‚       â”œâ”€â”€ api-keys/
â”‚       â”‚   â”œâ”€â”€ get.ts          # API í‚¤ ì¡°íšŒ
â”‚       â”‚   â”œâ”€â”€ save.ts         # API í‚¤ ì €ì¥
â”‚       â”‚   â””â”€â”€ delete.ts       # API í‚¤ ì‚­ì œ
â”‚       â””â”€â”€ content/
â”‚           â”œâ”€â”€ list.ts         # ì½˜í…ì¸  ëª©ë¡
â”‚           â””â”€â”€ save.ts         # ì½˜í…ì¸  ì €ì¥
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ client.tsx              # React í´ë¼ì´ì–¸íŠ¸ ì—”íŠ¸ë¦¬
â”‚   â”œâ”€â”€ App.tsx                 # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ types.ts                # TypeScript íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ constants.ts            # ìƒìˆ˜ (ì§„ë£Œê³¼, í˜ë¥´ì†Œë‚˜ ë“±)
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ InputForm.tsx       # ì…ë ¥ í¼ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ ResultPreview.tsx   # ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸° ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ AdminPage.tsx       # ê´€ë¦¬ì í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ ApiKeySettings.tsx  # API í‚¤ ì„¤ì •
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ gpt52-prompts-staged.ts # GPT-5.2 ë‹¨ê³„ë³„ í”„ë¡¬í”„íŠ¸
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ geminiService.ts    # Gemini API ì„œë¹„ìŠ¤ (ë‹¨ê³„ë³„ ì²˜ë¦¬)
â”‚   â”‚   â””â”€â”€ apiService.ts       # ğŸ†• Backend API ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ cssThemes.ts        # CSS í…Œë§ˆ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ public/
â”‚   â””â”€â”€ _routes.json            # ğŸ†• Cloudflare Pages ë¼ìš°íŒ… ì„¤ì •
â”œâ”€â”€ wrangler.jsonc              # ğŸ†• Wrangler ì„¤ì • (KV binding)
â”œâ”€â”€ vite.config.ts              # Vite ì„¤ì •
â”œâ”€â”€ tsconfig.json               # TypeScript ì„¤ì •
â””â”€â”€ package.json                # ì˜ì¡´ì„± ê´€ë¦¬
```

## ë¼ì´ì„ ìŠ¤
Private - ë¹„ê³µê°œ í”„ë¡œì íŠ¸

## ê¸°ìˆ  ë¬¸ì„œ

### ë‹¨ê³„ë³„ í”„ë¡¬í”„íŠ¸ ì‹œìŠ¤í…œ ìƒì„¸

ê° ë‹¨ê³„ëŠ” ë…ë¦½ì ì¸ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ GPT-5.2ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤:

- **`getStage1_ContentGeneration()`**: ì˜ë£Œë²• í•µì‹¬ ê·œì¹™ + ê¸°ë³¸ ê¸€ì“°ê¸°
- **`getStage2_RemoveAiSmell()`**: AI ëƒ„ìƒˆ íŒ¨í„´ ì œê±°
- **`getStage3_SeoOptimization()`**: SEO í‚¤ì›Œë“œ ìµœì í™”
- **`getStage4_MedicalLawCheck()`**: ì˜ë£Œë²• ê²€ì¦
- **`getStage5_FinalPolish()`**: ìµœì¢… í’ˆì§ˆ ì²´í¬

ê° ë‹¨ê³„ëŠ” ì´ì „ ë‹¨ê³„ì˜ ê²°ê³¼ë¥¼ ì…ë ¥ìœ¼ë¡œ ë°›ì•„ ê°œì„ í•˜ë©°, ì˜¤ë¥˜ ë°œìƒ ì‹œ ì´ì „ ë‹¨ê³„ ê²°ê³¼ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.

### GPT-5.2 vs Gemini ì„ íƒ ë¡œì§

1. **LocalStorageì—ì„œ AI Provider ì„¤ì • ì½ê¸°**
   - `AI_PROVIDER_SETTINGS` í‚¤ í™•ì¸
   - ì—†ìœ¼ë©´ OpenAI í‚¤ ì¡´ì¬ ì—¬ë¶€ë¡œ íŒë‹¨

2. **GPT-5.2 ì„ íƒ ì‹œ:**
   - Gemini ë“€ì–¼ ê²€ìƒ‰ìœ¼ë¡œ ì •ë³´ ìˆ˜ì§‘
   - 5ë‹¨ê³„ í”„ë¡¬í”„íŠ¸ ì‹œìŠ¤í…œìœ¼ë¡œ ê¸€ ì‘ì„±
   - ê° ë‹¨ê³„ë§ˆë‹¤ ì§„í–‰ ìƒí™© í‘œì‹œ

3. **Gemini ì„ íƒ ì‹œ:**
   - Gemini ê²€ìƒ‰ + ìƒì„±ì„ í•œ ë²ˆì— ì²˜ë¦¬
   - ë‹¨ì¼ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©

---
ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-01-08
